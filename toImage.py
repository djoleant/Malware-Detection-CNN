from os import listdir
from PIL import Image
import os.path
import numpy as np

# path to folder containing files
path = './php payloads'

h = 1355  # height of image, def 256
w = 1355  # width of image, def 256

images = []
for f in listdir(path):
    with open(os.path.join(path, f), 'rb') as img_set:
        img_arr = img_set.read(h*w)
        while img_arr:
            '''izbaceno iz sledeceg uslova: len(img_arr) == h*w and'''
            if img_arr not in images:
                images.append(img_arr)
            img_arr = img_set.read(h*w)
    print("Processing:", f)

print(images)

# saving to png
count = 0
for img in images:
    png = Image.fromarray(np.reshape(
        list(img), (h, w)).astype('float32'), mode='L')
    png.save('image_l%d.png' % count)
    count += 1
    print("Saving:", img)
